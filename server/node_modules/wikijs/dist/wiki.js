'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.default=wiki;var _util=require('./util'),_page=require('./page'),_page2=_interopRequireDefault(_page);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var defaultOptions={apiUrl:'http://en.wikipedia.org/w/api.php',origin:'*'};function wiki(){function a(i){return i.query.redirects&&1===i.query.redirects.length?(0,_util.api)(h,{prop:'info|pageprops',inprop:'url',ppprop:'disambiguation',titles:i.query.redirects[0].to}):i}var g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};this instanceof wiki&&console.log('Please do not use wikijs ^1.0.0 as a class. Please see the new README.');var h=Object.assign({},defaultOptions,g);return{search:function(i){var j=1<arguments.length&&arguments[1]!==void 0?arguments[1]:50;return(0,_util.pagination)(h,{list:'search',srsearch:i,srlimit:j},function(k){return k.query.search.map(function(l){return l.title})})},random:function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;return(0,_util.api)(h,{list:'random',rnnamespace:0,rnlimit:i}).then(function(j){return j.query.random.map(function(k){return k.title})})},page:function(i){return(0,_util.api)(h,{prop:'info|pageprops',inprop:'url',ppprop:'disambiguation',titles:i}).then(a).then(function(j){var k=Object.keys(j.query.pages)[0];if(!k||'-1'===k)throw new Error('No article found');return(0,_page2.default)(j.query.pages[k],h)})},geoSearch:function(i,j){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1e3;return(0,_util.api)(h,{list:'geosearch',gsradius:k,gscoord:i+'|'+j}).then(function(l){return l.query.geosearch.map(function(m){return m.title})})},options:g,findById:function(i){return(0,_util.api)(h,{prop:'info|pageprops',inprop:'url',ppprop:'disambiguation',pageids:i}).then(a).then(function(j){var k=Object.keys(j.query.pages)[0];if(!k||'-1'===k)throw new Error('No article found');return(0,_page2.default)(j.query.pages[k],h)})}}}
//# sourceMappingURL=wiki.js.map